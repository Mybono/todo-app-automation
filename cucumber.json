import { join } from 'path';
import type { Options } from '@wdio/types';

const config: Options.Testrunner = {
    runner: 'local',
    specs: ['./features/**/*.feature'],
    maxInstances: 1,
    capabilities: [{
        platformName: 'Android',
        'appium:deviceName': 'Android Emulator',
        'appium:platformVersion': '13.0',
        'appium:app': join(process.cwd(), 'app/TodoApp.apk'),
        'appium:automationName': 'UiAutomator2'
    }],
    logLevel: 'info',
    framework: 'cucumber',
    reporters: ['spec'],
    cucumberOpts: {
        require: ['./step-definitions/**/*.ts'],
        backtrace: false,
        requireModule: ['ts-node/register'],
        strict: true,
        tagExpression: '',
        timeout: 60000
    },
    services: ['appium'],
    autoCompileOpts: {
        tsNodeOpts: { transpileOnly: true },
        autoCompile: true
    }
};

export default config;
